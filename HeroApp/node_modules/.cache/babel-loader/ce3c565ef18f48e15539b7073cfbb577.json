{"ast":null,"code":"import _classCallCheck from\"/home/matheus/\\xC1rea de Trabalho/Projetos/appMasters/processo-seletivo-app-masters/HeroApp/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/matheus/\\xC1rea de Trabalho/Projetos/appMasters/processo-seletivo-app-masters/HeroApp/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/matheus/\\xC1rea de Trabalho/Projetos/appMasters/processo-seletivo-app-masters/HeroApp/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/matheus/\\xC1rea de Trabalho/Projetos/appMasters/processo-seletivo-app-masters/HeroApp/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/matheus/\\xC1rea de Trabalho/Projetos/appMasters/processo-seletivo-app-masters/HeroApp/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import api from'../services/api';import axios from'axios';//Components\nimport DialogStatistics from'./DialogStatistics';//Reacstrap\nimport{Button,Spinner}from'reactstrap';//Ant design\nimport{Card,Row,Col}from'antd';//Styled Components \nimport{Item,SubItem,DivCard}from'../styles/syles';//MAterial Ui\nimport{Grid}from'@material-ui/core';import{Snackbar}from'@material-ui/core';import MuiAlert from'@material-ui/lab/Alert';//Material Ui Icons\nimport CheckIcon from\"@material-ui/icons/Check\";import ErrorIcon from\"@material-ui/icons/Error\";var Meta=Card.Meta;var buttons;var numCards=4;var Snack={message:'',color:'',icon:null};var GameScreen=/*#__PURE__*/function(_Component){_inherits(GameScreen,_Component);function GameScreen(props){var _this;_classCallCheck(this,GameScreen);_this=_possibleConstructorReturn(this,_getPrototypeOf(GameScreen).call(this,props));_this.numAleatorio=function(range){return Math.floor(Math.random()*range);//Como o vetor de heroi tem tamanho 500 , pego un numero aleatorio de 0 a 499\n};_this.verifyName=function(e){//Se o botão foi clickado Adiciono 1 a meus cards visitado\n_this.state.numCards=_this.state.numCards+1;if(_this.state.pickedHeroe.name===e.target.value){Snack.message=\"Você Acertou!\";Snack.color=\"success\";Snack.icon=CheckIcon;_this.setState({points:_this.state.points+20,sucessesses:_this.state.sucessesses+1});}else{Snack.message=\"Você errou!\";Snack.color=\"warning\";Snack.icon=ErrorIcon;_this.setState({errors:_this.state.errors+1});}_this.setState({heroLoaded:false,pickedHeroe:null});_this.loadingSnackBar(Snack);if(_this.state.numCards===numCards){_this.verifyWinner();}};_this.verifyWinner=function(){clearInterval(_this.interval);if(_this.state.sucessesses>_this.state.errors){_this.setState({openStatistics:true,win:true});}else{_this.setState({openStatistics:true,win:false});}};_this.selectHeroes=function(){var numSorteado=_this.numAleatorio(_this.state.heroeList.length);var heroiSorteado=_this.state.heroeList[numSorteado];//Ja que escolhi o sorteado deleto ele da minha lista para evitar duplicatas\n_this.state.heroeList.splice(numSorteado,1);//Deletei o heroi do meu vetor de herois\nreturn heroiSorteado;};_this.updateCounter=function(){_this.setState({counter:_this.state.counter-1});};_this.state={counter:60,win:false,errorsPercentage:null,sucessessesPercentage:null,openStatistics:false,snackBarColor:'',snackBarMessage:'',snackbarIcon:null,snackBarOpen:false,numCards:0,//Contar quantos numeros de cards ja foram exibidos\nheroLoaded:false,//Controlar se o heroi esta carregado ou não \nheroeList:null,//Lista contendo todos os herois recebidos da api\nVisitedHeroes:[],//Vetor com os herois ja visitados para evitir duplicatas\nActualHeroes:[],//\npickedHeroe:null,points:0,sucessesses:0,errors:0,maxHeroes:5,choices:0};return _this;}_createClass(GameScreen,[{key:\"Alert\",value:function Alert(props){return React.createElement(MuiAlert,Object.assign({elevation:6,variant:\"filled\"},props));}},{key:\"loadingSnackBar\",value:function loadingSnackBar(snack){//Função para carregar a snack bar falando se usuario errou ou acertou o héroi\nthis.setState({snackBarColor:snack.color,snackBarMessage:snack.message,snackbarIcon:snack.icon,snackBarOpen:true});setTimeout(function(){this.setState({snackBarOpen:false});}.bind(this),1500);}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.interval=setInterval(this.updateCounter,1000);setTimeout(this.verifyWinner,60000);// this.updateInterval()\napi.get(\"/all.json\").then(function(res){return _this2.setState({heroeList:res.data});}).catch(function(error){return alert('erro de comunicação com o servidor '+error);});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevState){if(prevState.ActualHeroes!==this.state.ActualHeroes&&this.state.heroeList!==null){var actualHeros=this.selectHeroes();}}},{key:\"render\",value:function render(){var _this3=this;if(this.state.heroeList!==null&&this.state.heroLoaded===false){this.state.ActualHeroes=[];var pickedHero=this.selectHeroes();// Pego o heroi escolhido atraves da funcão auxiliar\nthis.setState({pickedHeroe:pickedHero,heroLoaded:true});var random=this.numAleatorio(3);//Escolho um numero aleatorio para o heroi certo , para a posição do botao certo não ser o mesmo toda vez\nfor(var i=0;i<3;i++){if(i===random){this.state.ActualHeroes.push(pickedHero);}else{this.state.ActualHeroes.push(this.state.heroeList[this.numAleatorio(this.state.heroeList.length)]);}}}if(this.state.counter===0){clearInterval(this.interval);}return React.createElement(\"div\",{style:{backgroundColor:'whitesmoke',height:\"100%\"}},React.createElement(DialogStatistics,{open:this.state.openStatistics,won:this.state.win,errors:this.state.errors/numCards*100,sucessess:this.state.sucessesses/numCards*100,points:this.state.points+this.state.counter}),React.createElement(Grid,{container:true,justify:\"space-around\"},React.createElement(Grid,{item:true,xl:4,xs:\"auto\"},React.createElement(\"div\",{className:\"offset-xl-2\"},React.createElement(Item,null,\" Pontuacao : \",this.state.points,\" \"),React.createElement(SubItem,null,\"Acertos : \",this.state.sucessesses,React.createElement(\"br\",null),\"Errors : \",this.state.errors))),React.createElement(Grid,{item:true,className:\"mt-3 mb-2\",xl:4,xs:8},React.createElement(DivCard,null,this.state.pickedHeroe?React.createElement(Card,{hoverable:true,style:{width:300,backgroundColor:'whitesmoke',marginTop:\"5%\"},cover:React.createElement(\"img\",{alt:\"example\",style:{width:'350px',borderRadius:'15px 15px 15px 15px'},className:\"img-fluid\",src:this.state.pickedHeroe.images.sm})},React.createElement(Meta,{title:\"\",description:\"\"}),React.createElement(Grid,{container:true,direction:\"column\",justify:\"center\",alignItems:\"center\"},this.state.ActualHeroes?this.state.ActualHeroes.map(function(heroSelected){return React.createElement(Grid,{fluid:true},React.createElement(Button,{className:\"mt-1\",onClick:_this3.verifyName,value:heroSelected.name,outline:true,color:\"primary\"},heroSelected.name,\" \"),React.createElement(\"br\",null));}):React.createElement(Spinner,{style:{marginLeft:\"25%\",marginTop:'25%',width:'3rem',height:'3rem'}}))):React.createElement(Spinner,{style:{marginLeft:\"25%\",marginTop:'25%',width:'3rem',height:'3rem'}}))),React.createElement(Grid,{className:\"mt-5\",item:true,xl:4},React.createElement(\"div\",{className:\"offset-xl-5\"},React.createElement(SubItem,null,\"Tempo Restante : \",this.state.counter),React.createElement(SubItem,null,\"Cards Restantes : \",numCards-this.state.numCards)))),React.createElement(Snackbar,{place:\"bc\",open:this.state.snackBarOpen,closeNotification:function closeNotification(){return _this3.setState({snackBarOpen:false});},close:true},React.createElement(MuiAlert,{elevation:6,variant:\"filled\",severity:this.state.snackBarColor},this.state.snackBarMessage)));}}]);return GameScreen;}(Component);export default GameScreen;","map":{"version":3,"sources":["/home/matheus/Área de Trabalho/Projetos/appMasters/processo-seletivo-app-masters/HeroApp/src/components/GameScreen.jsx"],"names":["React","Component","api","axios","DialogStatistics","Button","Spinner","Card","Row","Col","Item","SubItem","DivCard","Grid","Snackbar","MuiAlert","CheckIcon","ErrorIcon","Meta","buttons","numCards","Snack","message","color","icon","GameScreen","props","numAleatorio","range","Math","floor","random","verifyName","e","state","pickedHeroe","name","target","value","setState","points","sucessesses","errors","heroLoaded","loadingSnackBar","verifyWinner","clearInterval","interval","openStatistics","win","selectHeroes","numSorteado","heroeList","length","heroiSorteado","splice","updateCounter","counter","errorsPercentage","sucessessesPercentage","snackBarColor","snackBarMessage","snackbarIcon","snackBarOpen","VisitedHeroes","ActualHeroes","maxHeroes","choices","snack","setTimeout","bind","setInterval","get","then","res","data","catch","error","alert","prevState","actualHeros","pickedHero","i","push","backgroundColor","height","width","marginTop","borderRadius","images","sm","map","heroSelected","marginLeft"],"mappings":"o3BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,GAAP,KAAgB,iBAAhB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAGA;AACA,MAAOC,CAAAA,gBAAP,KAA6B,oBAA7B,CAEA;AACA,OAASC,MAAT,CAAiBC,OAAjB,KAAgC,YAAhC,CAGA;AACA,OAASC,IAAT,CAAeC,GAAf,CAAoBC,GAApB,KAA+B,MAA/B,CAEA;AACA,OAASC,IAAT,CAAeC,OAAf,CAAwBC,OAAxB,KAAuC,iBAAvC,CAEA;AACA,OAASC,IAAT,KAAqB,mBAArB,CACA,OAASC,QAAT,KAAyB,mBAAzB,CAEA,MAAOC,CAAAA,QAAP,KAAqB,wBAArB,CACA;AACA,MAAOC,CAAAA,SAAP,KAAsB,0BAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,0BAAtB,C,GAGQC,CAAAA,I,CAASX,I,CAATW,I,CAER,GAAIC,CAAAA,OAAJ,CACA,GAAMC,CAAAA,QAAQ,CAAG,CAAjB,CAEA,GAAMC,CAAAA,KAAK,CAAG,CACVC,OAAO,CAAE,EADC,CAEVC,KAAK,CAAE,EAFG,CAGVC,IAAI,CAAE,IAHI,CAAd,C,GAMMC,CAAAA,U,oEACF,oBAAYC,KAAZ,CAAmB,4CACf,4EAAMA,KAAN,GADe,MAgDnBC,YAhDmB,CAgDJ,SAACC,KAAD,CAAW,CACtB,MAAOC,CAAAA,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,GAAgBH,KAA3B,CAAP,CAAyC;AAC5C,CAlDkB,OA0EnBI,UA1EmB,CA0EN,SAACC,CAAD,CAAO,CAEhB;AACA,MAAKC,KAAL,CAAWd,QAAX,CAAsB,MAAKc,KAAL,CAAWd,QAAX,CAAsB,CAA5C,CACA,GAAI,MAAKc,KAAL,CAAWC,WAAX,CAAuBC,IAAvB,GAAgCH,CAAC,CAACI,MAAF,CAASC,KAA7C,CAAoD,CAChDjB,KAAK,CAACC,OAAN,CAAgB,eAAhB,CACAD,KAAK,CAACE,KAAN,CAAc,SAAd,CACAF,KAAK,CAACG,IAAN,CAAaR,SAAb,CACA,MAAKuB,QAAL,CAAc,CAAEC,MAAM,CAAE,MAAKN,KAAL,CAAWM,MAAX,CAAoB,EAA9B,CAAkCC,WAAW,CAAE,MAAKP,KAAL,CAAWO,WAAX,CAAyB,CAAxE,CAAd,EACH,CALD,IAKO,CACHpB,KAAK,CAACC,OAAN,CAAgB,aAAhB,CACAD,KAAK,CAACE,KAAN,CAAc,SAAd,CACAF,KAAK,CAACG,IAAN,CAAaP,SAAb,CACA,MAAKsB,QAAL,CAAc,CAAEG,MAAM,CAAE,MAAKR,KAAL,CAAWQ,MAAX,CAAoB,CAA9B,CAAd,EAEH,CACD,MAAKH,QAAL,CAAc,CAAEI,UAAU,CAAE,KAAd,CAAqBR,WAAW,CAAE,IAAlC,CAAd,EACA,MAAKS,eAAL,CAAqBvB,KAArB,EACA,GAAI,MAAKa,KAAL,CAAWd,QAAX,GAAwBA,QAA5B,CAAsC,CAClC,MAAKyB,YAAL,GACH,CACJ,CA/FkB,OAiGnBA,YAjGmB,CAiGJ,UAAM,CACjBC,aAAa,CAAC,MAAKC,QAAN,CAAb,CAEA,GAAI,MAAKb,KAAL,CAAWO,WAAX,CAAyB,MAAKP,KAAL,CAAWQ,MAAxC,CAAgD,CAC5C,MAAKH,QAAL,CAAc,CAAES,cAAc,CAAE,IAAlB,CAAwBC,GAAG,CAAE,IAA7B,CAAd,EACH,CAFD,IAEO,CACH,MAAKV,QAAL,CAAc,CAAES,cAAc,CAAE,IAAlB,CAAwBC,GAAG,CAAE,KAA7B,CAAd,EAEH,CACJ,CA1GkB,OA4GnBC,YA5GmB,CA4GJ,UAAM,CAEjB,GAAIC,CAAAA,WAAW,CAAG,MAAKxB,YAAL,CAAkB,MAAKO,KAAL,CAAWkB,SAAX,CAAqBC,MAAvC,CAAlB,CACA,GAAIC,CAAAA,aAAa,CAAG,MAAKpB,KAAL,CAAWkB,SAAX,CAAqBD,WAArB,CAApB,CAAsD;AACtD,MAAKjB,KAAL,CAAWkB,SAAX,CAAqBG,MAArB,CAA4BJ,WAA5B,CAAyC,CAAzC,EAA4C;AAE5C,MAAOG,CAAAA,aAAP,CACH,CAnHkB,OAqHnBE,aArHmB,CAqHH,UAAM,CAClB,MAAKjB,QAAL,CAAc,CAAEkB,OAAO,CAAE,MAAKvB,KAAL,CAAWuB,OAAX,CAAqB,CAAhC,CAAd,EACH,CAvHkB,CAGf,MAAKvB,KAAL,CAAa,CACTuB,OAAO,CAAE,EADA,CAETR,GAAG,CAAE,KAFI,CAGTS,gBAAgB,CAAE,IAHT,CAITC,qBAAqB,CAAE,IAJd,CAKTX,cAAc,CAAE,KALP,CAMTY,aAAa,CAAE,EANN,CAOTC,eAAe,CAAE,EAPR,CAQTC,YAAY,CAAE,IARL,CASTC,YAAY,CAAE,KATL,CAUT3C,QAAQ,CAAE,CAVD,CAUI;AACbuB,UAAU,CAAE,KAXH,CAWU;AACnBS,SAAS,CAAE,IAZF,CAYQ;AACjBY,aAAa,CAAE,EAbN,CAaU;AACnBC,YAAY,CAAE,EAdL,CAcS;AAClB9B,WAAW,CAAE,IAfJ,CAgBTK,MAAM,CAAE,CAhBC,CAiBTC,WAAW,CAAE,CAjBJ,CAkBTC,MAAM,CAAE,CAlBC,CAmBTwB,SAAS,CAAE,CAnBF,CAoBTC,OAAO,CAAE,CApBA,CAAb,CAHe,aA0BlB,C,2DACKzC,K,CAAO,CACT,MAAO,qBAAC,QAAD,gBAAU,SAAS,CAAE,CAArB,CAAwB,OAAO,CAAC,QAAhC,EAA6CA,KAA7C,EAAP,CACH,C,wDAIe0C,K,CAAO,CAAE;AACrB,KAAK7B,QAAL,CAAc,CACVqB,aAAa,CAAEQ,KAAK,CAAC7C,KADX,CAEVsC,eAAe,CAAEO,KAAK,CAAC9C,OAFb,CAGVwC,YAAY,CAAEM,KAAK,CAAC5C,IAHV,CAIVuC,YAAY,CAAE,IAJJ,CAAd,EAMAM,UAAU,CACN,UAAY,CACR,KAAK9B,QAAL,CAAc,CAAEwB,YAAY,CAAE,KAAhB,CAAd,EACH,CAFD,CAEEO,IAFF,CAEO,IAFP,CADM,CAIN,IAJM,CAAV,CAMH,C,6DAOmB,iBAChB,KAAKvB,QAAL,CAAgBwB,WAAW,CAAC,KAAKf,aAAN,CAAoB,IAApB,CAA3B,CACAa,UAAU,CAAC,KAAKxB,YAAN,CAAqB,KAArB,CAAV,CACD;AACC3C,GAAG,CAACsE,GAAJ,CAAQ,WAAR,EACKC,IADL,CACU,SAAAC,GAAG,QAED,CAAA,MAAI,CAACnC,QAAL,CAAc,CACVa,SAAS,CAAEsB,GAAG,CAACC,IADL,CAAd,CAFC,EADb,EAOMC,KAPN,CAOY,SAAAC,KAAK,QAAIC,CAAAA,KAAK,CAAC,sCAAwCD,KAAzC,CAAT,EAPjB,EASH,C,8DACkBE,S,CAAW,CAE1B,GAAIA,SAAS,CAACd,YAAV,GAA2B,KAAK/B,KAAL,CAAW+B,YAAtC,EAAsD,KAAK/B,KAAL,CAAWkB,SAAX,GAAyB,IAAnF,CAAyF,CACrF,GAAI4B,CAAAA,WAAW,CAAG,KAAK9B,YAAL,EAAlB,CACH,CACJ,C,uCAkDQ,iBAEL,GAAI,KAAKhB,KAAL,CAAWkB,SAAX,GAAyB,IAAzB,EAAiC,KAAKlB,KAAL,CAAWS,UAAX,GAA0B,KAA/D,CAAsE,CAClE,KAAKT,KAAL,CAAW+B,YAAX,CAA0B,EAA1B,CAEA,GAAIgB,CAAAA,UAAU,CAAG,KAAK/B,YAAL,EAAjB,CAAqC;AAErC,KAAKX,QAAL,CAAc,CAAEJ,WAAW,CAAE8C,UAAf,CAA2BtC,UAAU,CAAE,IAAvC,CAAd,EAEA,GAAIZ,CAAAA,MAAM,CAAG,KAAKJ,YAAL,CAAkB,CAAlB,CAAb,CAAkC;AAClC,IAAK,GAAIuD,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,CAApB,CAAuBA,CAAC,EAAxB,CAA4B,CACxB,GAAIA,CAAC,GAAKnD,MAAV,CAAkB,CACd,KAAKG,KAAL,CAAW+B,YAAX,CAAwBkB,IAAxB,CAA6BF,UAA7B,EACH,CAFD,IAEO,CACH,KAAK/C,KAAL,CAAW+B,YAAX,CAAwBkB,IAAxB,CAA6B,KAAKjD,KAAL,CAAWkB,SAAX,CAAqB,KAAKzB,YAAL,CAAkB,KAAKO,KAAL,CAAWkB,SAAX,CAAqBC,MAAvC,CAArB,CAA7B,EACH,CACJ,CACJ,CACD,GAAG,KAAKnB,KAAL,CAAWuB,OAAX,GAAuB,CAA1B,CACA,CACIX,aAAa,CAAC,KAAKC,QAAN,CAAb,CACH,CAED,MAEI,4BAAK,KAAK,CAAE,CAAEqC,eAAe,CAAE,YAAnB,CAAiCC,MAAM,CAAE,MAAzC,CAAZ,EACI,oBAAC,gBAAD,EACI,IAAI,CAAE,KAAKnD,KAAL,CAAWc,cADrB,CAEI,GAAG,CAAE,KAAKd,KAAL,CAAWe,GAFpB,CAGI,MAAM,CAAE,KAAKf,KAAL,CAAWQ,MAAX,CAAoBtB,QAApB,CAA+B,GAH3C,CAII,SAAS,CAAE,KAAKc,KAAL,CAAWO,WAAX,CAAyBrB,QAAzB,CAAoC,GAJnD,CAIwD,MAAM,CAAE,KAAKc,KAAL,CAAWM,MAAX,CAAoB,KAAKN,KAAL,CAAWuB,OAJ/F,EADJ,CAMI,oBAAC,IAAD,EAEI,SAAS,KAFb,CAGI,OAAO,CAAC,cAHZ,EAMI,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,CAAf,CACI,EAAE,CAAC,MADP,EAII,2BAAK,SAAS,CAAC,aAAf,EACI,oBAAC,IAAD,sBAAoB,KAAKvB,KAAL,CAAWM,MAA/B,KADJ,CAGI,oBAAC,OAAD,mBAEe,KAAKN,KAAL,CAAWO,WAF1B,CAGI,8BAHJ,aAIc,KAAKP,KAAL,CAAWQ,MAJzB,CAHJ,CAJJ,CANJ,CAuBI,oBAAC,IAAD,EAAM,IAAI,KAAV,CACI,SAAS,CAAC,WADd,CAEI,EAAE,CAAE,CAFR,CAGI,EAAE,CAAE,CAHR,EAKI,oBAAC,OAAD,MACK,KAAKR,KAAL,CAAWC,WAAX,CAAyB,oBAAC,IAAD,EACtB,SAAS,KADa,CAEtB,KAAK,CAAE,CAAEmD,KAAK,CAAE,GAAT,CAAcF,eAAe,CAAE,YAA/B,CAA6CG,SAAS,CAAE,IAAxD,CAFe,CAGtB,KAAK,CAAE,2BAAK,GAAG,CAAC,SAAT,CAAmB,KAAK,CAAE,CAAED,KAAK,CAAE,OAAT,CAAkBE,YAAY,CAAE,qBAAhC,CAA1B,CAAmF,SAAS,CAAC,WAA7F,CAAyG,GAAG,CAAE,KAAKtD,KAAL,CAAWC,WAAX,CAAuBsD,MAAvB,CAA8BC,EAA5I,EAHe,EAMtB,oBAAC,IAAD,EAAM,KAAK,CAAC,EAAZ,CAAe,WAAW,CAAC,EAA3B,EANsB,CAOtB,oBAAC,IAAD,EACI,SAAS,KADb,CAEI,SAAS,CAAC,QAFd,CAGI,OAAO,CAAC,QAHZ,CAII,UAAU,CAAC,QAJf,EAKK,KAAKxD,KAAL,CAAW+B,YAAX,CAA0B,KAAK/B,KAAL,CAAW+B,YAAX,CAAwB0B,GAAxB,CAA4B,SAAAC,YAAY,QAC/D,qBAAC,IAAD,EACI,KAAK,KADT,EAGI,oBAAC,MAAD,EAAQ,SAAS,CAAC,MAAlB,CAAyB,OAAO,CAAE,MAAI,CAAC5D,UAAvC,CAAmD,KAAK,CAAE4D,YAAY,CAACxD,IAAvE,CAA6E,OAAO,KAApF,CAAqF,KAAK,CAAC,SAA3F,EAAsGwD,YAAY,CAACxD,IAAnH,KAHJ,CAII,8BAJJ,CAD+D,EAAxC,CAA1B,CAQI,oBAAC,OAAD,EAAS,KAAK,CAAE,CAAEyD,UAAU,CAAE,KAAd,CAAqBN,SAAS,CAAE,KAAhC,CAAuCD,KAAK,CAAE,MAA9C,CAAsDD,MAAM,CAAE,MAA9D,CAAhB,EAbT,CAPsB,CAAzB,CAuBS,oBAAC,OAAD,EAAS,KAAK,CAAE,CAAEQ,UAAU,CAAE,KAAd,CAAqBN,SAAS,CAAE,KAAhC,CAAuCD,KAAK,CAAE,MAA9C,CAAsDD,MAAM,CAAE,MAA9D,CAAhB,EAxBd,CALJ,CAvBJ,CA0DI,oBAAC,IAAD,EACI,SAAS,CAAC,MADd,CAEI,IAAI,KAFR,CAES,EAAE,CAAE,CAFb,EAII,2BAAK,SAAS,CAAC,aAAf,EACI,oBAAC,OAAD,0BACsB,KAAKnD,KAAL,CAAWuB,OADjC,CADJ,CAII,oBAAC,OAAD,2BACuBrC,QAAQ,CAAG,KAAKc,KAAL,CAAWd,QAD7C,CAJJ,CAJJ,CA1DJ,CANJ,CA+EI,oBAAC,QAAD,EACI,KAAK,CAAC,IADV,CAEI,IAAI,CAAE,KAAKc,KAAL,CAAW6B,YAFrB,CAGI,iBAAiB,CAAE,mCAAM,CAAA,MAAI,CAACxB,QAAL,CAAc,CAAEwB,YAAY,CAAE,KAAhB,CAAd,CAAN,EAHvB,CAII,KAAK,KAJT,EAMI,oBAAC,QAAD,EAAU,SAAS,CAAE,CAArB,CAAwB,OAAO,CAAC,QAAhC,CAAyC,QAAQ,CAAE,KAAK7B,KAAL,CAAW0B,aAA9D,EACK,KAAK1B,KAAL,CAAW2B,eADhB,CANJ,CA/EJ,CAFJ,CA+FH,C,wBAjPoB5D,S,EAoPzB,cAAewB,CAAAA,UAAf","sourcesContent":["import React, { Component } from 'react'\nimport api from '../services/api'\nimport axios from 'axios'\n\n\n//Components\nimport DialogStatistics from './DialogStatistics'\n\n//Reacstrap\nimport { Button, Spinner } from 'reactstrap'\n\n\n//Ant design\nimport { Card, Row, Col } from 'antd';\n\n//Styled Components \nimport { Item, SubItem, DivCard } from '../styles/syles'\n\n//MAterial Ui\nimport { Grid } from '@material-ui/core'\nimport { Snackbar } from '@material-ui/core';\n\nimport MuiAlert from '@material-ui/lab/Alert';\n//Material Ui Icons\nimport CheckIcon from \"@material-ui/icons/Check\";\nimport ErrorIcon from \"@material-ui/icons/Error\";\n\n\nconst { Meta } = Card;\n\nlet buttons;\nconst numCards = 4;\n\nconst Snack = {\n    message: '',\n    color: '',\n    icon: null\n}\n\nclass GameScreen extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            counter: 60,\n            win: false,\n            errorsPercentage: null,\n            sucessessesPercentage: null,\n            openStatistics: false,\n            snackBarColor: '',\n            snackBarMessage: '',\n            snackbarIcon: null,\n            snackBarOpen: false,\n            numCards: 0, //Contar quantos numeros de cards ja foram exibidos\n            heroLoaded: false, //Controlar se o heroi esta carregado ou não \n            heroeList: null, //Lista contendo todos os herois recebidos da api\n            VisitedHeroes: [], //Vetor com os herois ja visitados para evitir duplicatas\n            ActualHeroes: [], //\n            pickedHeroe: null,\n            points: 0,\n            sucessesses: 0,\n            errors: 0,\n            maxHeroes: 5,\n            choices: 0,\n\n        }\n    }\n    Alert(props) {\n        return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n    }\n\n\n\n    loadingSnackBar(snack) { //Função para carregar a snack bar falando se usuario errou ou acertou o héroi\n        this.setState({\n            snackBarColor: snack.color,\n            snackBarMessage: snack.message,\n            snackbarIcon: snack.icon,\n            snackBarOpen: true\n        });\n        setTimeout(\n            function () {\n                this.setState({ snackBarOpen: false });\n            }.bind(this),\n            1500\n        );\n    }\n\n    numAleatorio = (range) => {\n        return Math.floor(Math.random() * range) //Como o vetor de heroi tem tamanho 500 , pego un numero aleatorio de 0 a 499\n    }\n\n\n    componentDidMount() {\n        this.interval = setInterval(this.updateCounter,1000);\n        setTimeout(this.verifyWinner , 60000)\n       // this.updateInterval()\n        api.get(\"/all.json\")\n            .then(res => (\n                (\n                    this.setState({\n                        heroeList: res.data\n                    })\n                ))\n            ).catch(error => alert('erro de comunicação com o servidor ' + error))\n\n    }\n    componentDidUpdate(prevState) {\n\n        if (prevState.ActualHeroes !== this.state.ActualHeroes && this.state.heroeList !== null) {\n            let actualHeros = this.selectHeroes()\n        }\n    }\n\n    verifyName = (e) => {\n\n        //Se o botão foi clickado Adiciono 1 a meus cards visitado\n        this.state.numCards = this.state.numCards + 1\n        if (this.state.pickedHeroe.name === e.target.value) {\n            Snack.message = \"Você Acertou!\"\n            Snack.color = \"success\"\n            Snack.icon = CheckIcon\n            this.setState({ points: this.state.points + 20, sucessesses: this.state.sucessesses + 1 })\n        } else {\n            Snack.message = \"Você errou!\"\n            Snack.color = \"warning\"\n            Snack.icon = ErrorIcon\n            this.setState({ errors: this.state.errors + 1 })\n\n        }\n        this.setState({ heroLoaded: false, pickedHeroe: null })\n        this.loadingSnackBar(Snack)\n        if (this.state.numCards === numCards) {\n            this.verifyWinner()\n        }\n    }\n\n    verifyWinner = () => {\n        clearInterval(this.interval)\n\n        if (this.state.sucessesses > this.state.errors) {\n            this.setState({ openStatistics: true, win: true })\n        } else {\n            this.setState({ openStatistics: true, win: false })\n\n        }\n    }\n\n    selectHeroes = () => {\n\n        let numSorteado = this.numAleatorio(this.state.heroeList.length)\n        let heroiSorteado = this.state.heroeList[numSorteado] //Ja que escolhi o sorteado deleto ele da minha lista para evitar duplicatas\n        this.state.heroeList.splice(numSorteado, 1) //Deletei o heroi do meu vetor de herois\n\n        return heroiSorteado\n    }\n\n    updateCounter = () => {\n        this.setState({ counter: this.state.counter - 1 })\n    }\n\n\n    render() {\n        \n        if (this.state.heroeList !== null && this.state.heroLoaded === false) {\n            this.state.ActualHeroes = []\n\n            let pickedHero = this.selectHeroes() // Pego o heroi escolhido atraves da funcão auxiliar\n\n            this.setState({ pickedHeroe: pickedHero, heroLoaded: true })\n\n            let random = this.numAleatorio(3) //Escolho um numero aleatorio para o heroi certo , para a posição do botao certo não ser o mesmo toda vez\n            for (var i = 0; i < 3; i++) {\n                if (i === random) {\n                    this.state.ActualHeroes.push(pickedHero)\n                } else {\n                    this.state.ActualHeroes.push(this.state.heroeList[this.numAleatorio(this.state.heroeList.length)])\n                }\n            }\n        }\n        if(this.state.counter === 0) \n        {\n            clearInterval(this.interval)\n        }\n\n        return (\n\n            <div style={{ backgroundColor: 'whitesmoke', height: \"100%\" }}>\n                <DialogStatistics\n                    open={this.state.openStatistics}\n                    won={this.state.win}\n                    errors={this.state.errors / numCards * 100}\n                    sucessess={this.state.sucessesses / numCards * 100} points={this.state.points + this.state.counter} />\n                <Grid\n\n                    container\n                    justify=\"space-around\"\n                >\n\n                    <Grid item xl={4}\n                        xs=\"auto\"\n\n                    >\n                        <div className=\"offset-xl-2\">\n                            <Item> Pontuacao : {this.state.points} </Item>\n\n                            <SubItem>\n\n                                Acertos : {this.state.sucessesses}\n                                <br />\n                                Errors : {this.state.errors}\n\n                            </SubItem>\n                        </div>\n\n                    </Grid>\n                    <Grid item\n                        className=\"mt-3 mb-2\"\n                        xl={4}\n                        xs={8}\n                    >\n                        <DivCard>\n                            {this.state.pickedHeroe ? <Card\n                                hoverable\n                                style={{ width: 300, backgroundColor: 'whitesmoke', marginTop: \"5%\" }}\n                                cover={<img alt=\"example\" style={{ width: '350px', borderRadius: '15px 15px 15px 15px' }} className=\"img-fluid\" src={this.state.pickedHeroe.images.sm} />}\n                            >\n\n                                <Meta title=\"\" description=\"\" />\n                                <Grid\n                                    container\n                                    direction=\"column\"\n                                    justify=\"center\"\n                                    alignItems=\"center\">\n                                    {this.state.ActualHeroes ? this.state.ActualHeroes.map(heroSelected => (\n                                        <Grid\n                                            fluid\n                                        >\n                                            <Button className=\"mt-1\" onClick={this.verifyName} value={heroSelected.name} outline color=\"primary\">{heroSelected.name} </Button>\n                                            <br />\n                                        </Grid>\n\n                                    )) : <Spinner style={{ marginLeft: \"25%\", marginTop: '25%', width: '3rem', height: '3rem' }} />}\n                                </Grid>\n\n                            </Card> : <Spinner style={{ marginLeft: \"25%\", marginTop: '25%', width: '3rem', height: '3rem' }} />\n\n                            }\n                        </DivCard>\n\n                    </Grid>\n                    <Grid\n                        className=\"mt-5\"\n                        item xl={4}\n                    >\n                        <div className=\"offset-xl-5\">\n                            <SubItem>\n                                Tempo Restante : {this.state.counter}\n                            </SubItem>\n                            <SubItem>\n                                Cards Restantes : {numCards - this.state.numCards}\n                            </SubItem>\n                        </div>\n                    </Grid>\n                </Grid>\n\n                <Snackbar\n                    place=\"bc\"\n                    open={this.state.snackBarOpen}\n                    closeNotification={() => this.setState({ snackBarOpen: false })}\n                    close\n                >\n                    <MuiAlert elevation={6} variant=\"filled\" severity={this.state.snackBarColor}>\n                        {this.state.snackBarMessage}\n                    </MuiAlert>\n\n                </Snackbar>\n\n            </div>\n        )\n    }\n}\n\nexport default GameScreen"]},"metadata":{},"sourceType":"module"}